#F. Путь через снега

В городе X очень суровая зима. Для того, чтобы люди могли как-то перемещаться по городу в морозы и бураны в нём работает сеть специальных заведений, где каждый прохожий может оттаять, согреться. Чтобы помочь пользователям наших картографических сервисов, мы решили добавить возможность построения "теплых"пеших маршрутов, которые учитывали бы такие заведения. Напишите алгоритм, который прокладывал бы путь через сеть улиц, не позволяя пользователю проходить больше двух точек подряд не погревшись. Считается в стартовой и конечной точках маршрута пользователю есть где укрыться от мороза.

Дан неориентированный граф, часть вершин которого отмечены (места, где можно погреться). Нужно найти кратчайший путь между первой и последней вершинами, такой, что хотя бы одна из каждых трех идущих подряд вершин была бы отмечена, или сказать, что такого пути нет.

Граф представлен списком смежности: массивом, где каждый индекс - это номер вершины, а значение доступное по индексу - это массив с номерами вершин с которыми данная вершина соединена. Т.к. граф неориентирован, матрица связей всегда симметрична. Т.е. если ‘graph[N].contains(M)‘ то и ‘graph[M].contains(N)‘. Вершины в списке связей / списке отмеченных точек не обязательно упорядочены. Вершина графа имеет произвольное количество связей. Например такой вот цикличный граф, состоящий из четырех вершин:

<pre>0 --- 1  
|     |  
3 --- 2</pre>
в виде списка смежности выглядит так:

<pre>[  
    [1,3],  
    [0,2],  
    [1,3],  
    [0,2]  
]</pre>
Интересующий нас путь начинается от вершины с индексом 0 и заканчивается в вершине с максимальным номером. Первая и последняя вершины всегда отмечены. Отмеченные вершины передаются в виде массива с их номерами. Например, [2,4,7]. Максимальное количество вершин в графе не превышает 10e4. Максимальное количество связей не превышает 10e6. Любое количество вершин в графе может быть отмечено (от 2ух до всех). Желательно, чтобы алгоритм быстро работал даже на больших графах.

Формат ввода
<pre>0!  
| \  
1  2  
|   \  
3    4  
|     \  
5!     6  
|       \  
7---8---9!
</pre>
<pre>
const graph = [  
    [1,2],  
    [0,3],  
    [0,4],  
    [1,5],  
    [2,6],  
    [3,7],  
    [4,9],  
    [5,8],  
    [7,9],  
    [6,8]  
];  
const markedVertices = [0,5,9];
</pre>

Формат вывода

6